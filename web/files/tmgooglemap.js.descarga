function initTmgoogleMapScript(url,callback){var tmGoogleScript=document.createElement('script');if(callback){tmGoogleScript.onload=callback;}
tmGoogleScript.async=true;tmGoogleScript.type='text/javascript';tmGoogleScript.src=url;document.body.appendChild(tmGoogleScript);}
function loadTMGoogleMapsAPI(){if(typeof(googleScriptStatus)!='undefined'){if(!googleScriptStatus){if($('.tmgooglemap').length){var googleAPIKey=$('.tmgooglemap').find('div[data-type="google-api-key"]').attr('data-value');initTmgoogleMapScript('//maps.googleapis.com/maps/api/js?key='+ googleAPIKey+'&callback=initTMGoogleMap');}}else{initTMGoogleMap();}}}
$(window).load(function(){loadTMGoogleMapsAPI();});function initTMGoogleMap(){var maps=$('.tmgooglemap');maps.each(function(){if(!$('#'+ this.id+' div[data-type="map-container"]').length||!$('#'+ this.id+' div[data-type="current-map-settings"]').length){return;}
var container=$('#'+ this.id+' div[data-type="map-container"]'),settings=$('#'+ this.id+' div[data-type="current-map-settings"]');if(!settings.find('div[data-type="default-longtitude"]').attr('data-value')||!settings.find('div[data-type="default-latitude"]').attr('data-value')){return;}
var default_longtitude=settings.find('div[data-type="default-longtitude"]').attr('data-value'),default_latitude=settings.find('div[data-type="default-latitude"]').attr('data-value'),map_id=container.attr('id');if($('#'+ map_id).length<1){return;}
var isDraggable=$(window).width()>1023?true:false,isPan=$(window).width()<1024?true:false,map_zoom=settings.find('div[data-setting-name="TMGOOGLE_ZOOM"]').attr('data-setting-value'),map_style=settings.find('div[data-setting-name="TMGOOGLE_STYLE"]').attr('data-setting-value'),map_type=settings.find('div[data-setting-name="TMGOOGLE_TYPE"]').attr('data-setting-value'),map_scroll=settings.find('div[data-setting-name="TMGOOGLE_SCROLL"]').attr('data-setting-value'),map_control=settings.find('div[data-setting-name="TMGOOGLE_TYPE_CONTROL"]').attr('data-setting-value'),map_street_view=settings.find('div[data-setting-name="TMGOOGLE_STREET_VIEW"]').attr('data-setting-value'),map_animation=settings.find('div[data-setting-name="TMGOOGLE_ANIMATION"]').attr('data-setting-value'),map_popup=settings.find('div[data-setting-name="TMGOOGLE_POPUP"]').attr('data-setting-value'),map_img=settings.find('div[data-type="img-store-dir"]').attr('data-value'),map_icon=settings.find('div[data-type="marker-path"]').attr('data-value'),map_stores=settings.find('.map-stores'),translations=settings.find('div[data-type="translations"]');tmmap=new google.maps.Map(document.getElementById(map_id),{center:new google.maps.LatLng(parseFloat(default_latitude),parseFloat(default_longtitude)),zoom:parseInt(map_zoom),mapTypeId:map_type,scrollwheel:parseInt(map_scroll),mapTypeControl:parseInt(map_control),streetViewControl:parseInt(map_street_view),draggable:isDraggable,panControl:isPan,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},styles:google_map_style[map_style]});infoWindow=new google.maps.InfoWindow();initTmMarkers(tmmap,map_stores,map_icon,translations,map_animation,map_popup,map_img);});}
function initTmMarkers(map,stores,map_icon,translations,animation,popup,img){stores.find('> div').each(function(){var s=$(this);var tmlatlng=new google.maps.LatLng(parseFloat(s.attr('data-store-latitude')),parseFloat(s.attr('data-store-longitude'))),tmname=s.attr('data-store-name'),tmaddress=s.attr('data-store-address1'),tmother=s.attr('data-store-name'),tmid_store=s.attr('data-store-id'),tmhas_store_picture=s.attr('data-store-id_image'),tmid=s.attr('data-store-id_tab'),tmimagemarker=s.attr('data-store-marker')?map_icon+ s.attr('data-store-marker'):'',tmcontent=s.attr('data-store-content'),tmdays_1=s.attr('data-store-hour1'),tmdays_2=s.attr('data-store-hour2'),tmdays_3=s.attr('data-store-hour3'),tmdays_4=s.attr('data-store-hour4'),tmdays_5=s.attr('data-store-hour5'),tmdays_6=s.attr('data-store-hour6'),tmdays_7=s.attr('data-store-hour7');createTmMarker(map,translations,animation,popup,img,tmlatlng,tmname,tmaddress,tmother,tmid_store,tmhas_store_picture,tmid,tmimagemarker,tmcontent,tmdays_1,tmdays_2,tmdays_3,tmdays_4,tmdays_5,tmdays_6,tmdays_7);});}
function createTmMarker(map,translations,animation,popup,img,tmlatlng,tmname,tmaddress,tmother,tmid_store,tmhas_store_picture,tmid,tmimagemarker,tmcontent,tmdays_1,tmdays_2,tmdays_3,tmdays_4,tmdays_5,tmdays_6,tmdays_7){var tmmarker='';var tmanimationmarker='';if(animation==true){tmanimationmarker=google.maps.Animation.BOUNCE;}else{tmanimationmarker=false;}
tmmarker=new google.maps.Marker({map:map,position:tmlatlng,icon:tmimagemarker,title:tmname,animation:tmanimationmarker});if(popup==true){var tm_directions=translations.find('div[data-lang-variable="tm_directions"]').attr('data-value'),translation_1=translations.find('div[data-lang-variable="translation_1"]').attr('data-value'),translation_2=translations.find('div[data-lang-variable="translation_2"]').attr('data-value'),translation_3=translations.find('div[data-lang-variable="translation_3"]').attr('data-value'),translation_4=translations.find('div[data-lang-variable="translation_4"]').attr('data-value'),translation_5=translations.find('div[data-lang-variable="translation_5"]').attr('data-value'),translation_6=translations.find('div[data-lang-variable="translation_6"]').attr('data-value'),translation_7=translations.find('div[data-lang-variable="translation_7"]').attr('data-value');var tmhours_1='<p><b>'+ translation_1+': </b><span>'+ tmdays_1+'</span></p>',tmhours_2='<p><b>'+ translation_2+': </b><span>'+ tmdays_2+'</span></p>',tmhours_3='<p><b>'+ translation_3+': </b><span>'+ tmdays_3+'</span></p>',tmhours_4='<p><b>'+ translation_4+': </b><span>'+ tmdays_4+'</span></p>',tmhours_5='<p><b>'+ translation_5+': </b><span>'+ tmdays_5+'</span></p>',tmhours_6='<p><b>'+ translation_6+': </b><span>'+ tmdays_6+'</span></p>',tmhours_7='<p><b>'+ translation_7+': </b><span>'+ tmdays_7+'</span></p>';var tmhours='<div class="tmgooglemap-hours clearfix">'+''+(!!(tmdays_1)?tmhours_1:'')+''+''+(!!(tmdays_2)?tmhours_2:'')+''+''+(!!(tmdays_3)?tmhours_3:'')+''+''+(!!(tmdays_4)?tmhours_4:'')+''+''+(!!(tmdays_5)?tmhours_5:'')+''+''+(!!(tmdays_6)?tmhours_6:'')+''+''+(!!(tmdays_7)?tmhours_7:'')+'</div>';var tmhtml='<div class="marker_content tmgooglemap-popup-'+ tmid_store+'">'+'<div class="tmaddress-content clearfix">'+((!!tmhas_store_picture)?'<img class="marker_logo" src="'+ img+ parseInt(tmid)+'.jpg" alt="" />':'')+''+'<div class="description"><h5>'+ tmname+'</h5><p>'+ tmaddress+'</p></div>'+'</div><div class="tmgooglemap-content clearfix">'+ tmcontent+'</div>'+ tmhours+'<a class="tmlink-directions" href="//maps.google.com/maps?saddr=&daddr='+ tmlatlng+'" target="_blank">'+ tm_directions+'</a>'+'</div>';google.maps.event.addListener(tmmarker,'click',function(){infoWindow.setContent(tmhtml);infoWindow.open(tmmap,tmmarker);});}}